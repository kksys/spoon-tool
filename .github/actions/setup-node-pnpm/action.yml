runs:
  using: "Composite"
  steps:
    - name: Set node & pnpm version
      shell: bash
      run: |
        node_version=$(cat package.json | jq -r .engines.node)
        pnpm_version=$(cat package.json | jq -r .engines.pnpm)
        echo "NODE_VERSION=${node_version}" >> $GITHUB_ENV
        echo "PNPM_VERSION=${pnpm_version}" >> $GITHUB_ENV

    - uses: pnpm/action-setup@fe02b34f77f8bc703788d5817da081398fad5dd2 # v4.0.0
      with:
        version: ${{ env.PNPM_VERSION }}

    - uses: actions/setup-node@1d0ff469b7ec7b3cb9d8673fde0c81c44821de2a # v4
      with:
        node-version: ${{ env.NODE_VERSION }}
        cache: "pnpm"
